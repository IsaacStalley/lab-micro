gplink-1.4.0 #1107 (Jan  1 2021)
Copyright (c) 1998-2014 gputils project
Listing File Generated: 8-30-2023  20:11:36
 
 
Address  Value    Disassembly              Source
-------  -----    -----------              ------
                                           ;--------------------------------------------------------
                                           ; File Created by SDCC : free open source ANSI-C Compiler
                                           ; Version 4.0.0 #11528 (Linux)
                                           ;--------------------------------------------------------
                                           ; PIC port for the 14-bit core
                                           ;--------------------------------------------------------
                                           ;	.file	"six_sided_dice.c"
                                           	list	p=12f683
                                           	radix dec
                                           	include "p12f683.inc"
                                                   LIST
                                           
                                           ;==========================================================================
                                           ; Build date : Aug 07 2014
                                           ;  MPASM PIC12F683 processor include
                                           ; 
                                           ;  (c) Copyright 1999-2014 Microchip Technology, All rights reserved
                                           ;==========================================================================
                                           
                                                   NOLIST
                                           ;--------------------------------------------------------
                                           ; config word(s)
                                           ;--------------------------------------------------------
002007   0000     nop                      	__config 0x0
                                           ;--------------------------------------------------------
                                           ; external declarations
                                           ;--------------------------------------------------------
                                           	extern	__modsint
                                           	extern	_TRISIO
                                           	extern	_GPIO
                                           	extern	_GPIObits
                                           	extern	__sdcc_gsinit_startup
                                           ;--------------------------------------------------------
                                           ; global declarations
                                           ;--------------------------------------------------------
                                           	global	_main
                                           	global	_lfsrGenerate
                                           	global	_delay
                                           	global	_lfsr
                                           
                                           	global PSAVE
                                           	global SSAVE
                                           	global WSAVE
                                           	global STK12
                                           	global STK11
                                           	global STK10
                                           	global STK09
                                           	global STK08
                                           	global STK07
                                           	global STK06
                                           	global STK05
                                           	global STK04
                                           	global STK03
                                           	global STK02
                                           	global STK01
                                           	global STK00
                                           
                                           sharebank udata_ovr 0x0070
                                           PSAVE	res 1
                                           SSAVE	res 1
                                           WSAVE	res 1
                                           STK12	res 1
                                           STK11	res 1
                                           STK10	res 1
                                           STK09	res 1
                                           STK08	res 1
                                           STK07	res 1
                                           STK06	res 1
                                           STK05	res 1
                                           STK04	res 1
                                           STK03	res 1
                                           STK02	res 1
                                           STK01	res 1
                                           STK00	res 1
                                           
                                           ;--------------------------------------------------------
                                           ; global definitions
                                           ;--------------------------------------------------------
                                           ;--------------------------------------------------------
                                           ; absolute symbol definitions
                                           ;--------------------------------------------------------
                                           ;--------------------------------------------------------
                                           ; compiler-defined variables
                                           ;--------------------------------------------------------
                                           UDL_six_sided_dice_0	udata
                                           r0x1002	res	1
                                           r0x1001	res	1
                                           r0x1003	res	1
                                           r0x1004	res	1
                                           r0x1005	res	1
                                           r0x1006	res	1
                                           r0x1007	res	1
                                           r0x1008	res	1
                                           r0x1009	res	1
                                           ;--------------------------------------------------------
                                           ; initialized data
                                           ;--------------------------------------------------------
                                           
                                           IDD_six_sided_dice_0	idata
                                           _lfsr
                                           	db	0x55	; 85	'U'
                                           
                                           ;--------------------------------------------------------
                                           ; initialized absolute data
                                           ;--------------------------------------------------------
                                           ;--------------------------------------------------------
                                           ; overlayable items in internal ram 
                                           ;--------------------------------------------------------
                                           ;	udata_ovr
                                           ;--------------------------------------------------------
                                           ; reset vector 
                                           ;--------------------------------------------------------
                                           STARTUP	code 0x0000
000000   0000     nop                      	nop
                                           	pagesel __sdcc_gsinit_startup
000001   2802     goto    0x0002           	goto	__sdcc_gsinit_startup
                                           ;--------------------------------------------------------
                                           ; code
                                           ;--------------------------------------------------------
                                           code_six_sided_dice	code
                                           ;***
                                           ;  pBlock Stats: dbName = M
                                           ;***
                                           ;has an exit
                                           ;functions called:
                                           ;   _lfsrGenerate
                                           ;   __modsint
                                           ;   _delay
                                           ;   _lfsrGenerate
                                           ;   __modsint
                                           ;   _delay
                                           ;7 compiler assigned registers:
                                           ;   r0x1007
                                           ;   r0x1008
                                           ;   r0x1009
                                           ;   STK02
                                           ;   STK01
                                           ;   STK00
                                           ;   r0x100A
                                           ;; Starting pCode block
                                           S_six_sided_dice__main	code
                                           _main:
                                           ; 2 exit points
                                           ;	.line	27; "six_sided_dice.c"	TRISIO = 0b00100000;  // Set GP5 as input
00014c   3020     movlw   0x20             	MOVLW	0x20
00014d   1683     bsf     0x03, 0x5        	BANKSEL	_TRISIO
00014e   0085     movwf   0x05             	MOVWF	_TRISIO
                                           ;	.line	28; "six_sided_dice.c"	GPIO = 0x00;
00014f   1283     bcf     0x03, 0x5        	BANKSEL	_GPIO
000150   0185     clrf    0x05             	CLRF	_GPIO
                                           _00160_DS_:
                                           ;	.line	33; "six_sided_dice.c"	if (GP5) {
000151   1283     bcf     0x03, 0x5        	BANKSEL	_GPIObits
000152   1e85     btfss   0x05, 0x5        	BTFSS	_GPIObits,5
000153   2951     goto    0x0151           	GOTO	_00160_DS_
                                           ;	.line	35; "six_sided_dice.c"	unsigned char numLeds = (lfsrGenerate() % 6) + 1;
                                           	PAGESEL	_lfsrGenerate
000154   21e5     call    0x01e5           	CALL	_lfsrGenerate
                                           	PAGESEL	$
000155   1683     bsf     0x03, 0x5        	BANKSEL	r0x1007
000156   00b2     movwf   0x32             	MOVWF	r0x1007
000157   00b3     movwf   0x33             	MOVWF	r0x1008
000158   01b4     clrf    0x34             	CLRF	r0x1009
000159   3006     movlw   0x06             	MOVLW	0x06
00015a   00fd     movwf   0x7d             	MOVWF	STK02
00015b   3000     movlw   0x00             	MOVLW	0x00
00015c   00fe     movwf   0x7e             	MOVWF	STK01
00015d   0833     movf    0x33, 0x0        	MOVF	r0x1008,W
00015e   00ff     movwf   0x7f             	MOVWF	STK00
00015f   3000     movlw   0x00             	MOVLW	0x00
                                           	PAGESEL	__modsint
000160   209e     call    0x009e           	CALL	__modsint
                                           	PAGESEL	$
000161   1683     bsf     0x03, 0x5        	BANKSEL	r0x1008
000162   00b3     movwf   0x33             	MOVWF	r0x1008
000163   087f     movf    0x7f, 0x0        	MOVF	STK00,W
000164   00b2     movwf   0x32             	MOVWF	r0x1007
000165   00b4     movwf   0x34             	MOVWF	r0x1009
000166   0a34     incf    0x34, 0x0        	INCF	r0x1009,W
000167   00b4     movwf   0x34             	MOVWF	r0x1009
000168   00b2     movwf   0x32             	MOVWF	r0x1007
                                           ;	.line	38; "six_sided_dice.c"	unsigned char temp = 0;
000169   01b3     clrf    0x33             	CLRF	r0x1008
                                           ;;100	MOVF	r0x1007,W
                                           ;;1	CLRF	r0x100A
                                           ;	.line	40; "six_sided_dice.c"	if (numLeds % 2){
00016a   1c34     btfss   0x34, 0x0        	BTFSS	r0x1009,0
00016b   296e     goto    0x016e           	GOTO	_00147_DS_
                                           ;	.line	41; "six_sided_dice.c"	temp |= (0b00001);
00016c   3001     movlw   0x01             	MOVLW	0x01
00016d   00b3     movwf   0x33             	MOVWF	r0x1008
                                           ;;swapping arguments (AOP_TYPEs 1/2)
                                           ;;unsigned compare: left >= lit(0x2=2), size=1
                                           _00147_DS_:
                                           ;	.line	43; "six_sided_dice.c"	if (numLeds > 1){
00016e   3002     movlw   0x02             	MOVLW	0x02
                                           ;	.line	44; "six_sided_dice.c"	temp |= (0b00010);
00016f   1683     bsf     0x03, 0x5        	BANKSEL	r0x1007
000170   0232     subwf   0x32, 0x0        	SUBWF	r0x1007,W
                                           ;	.line	46; "six_sided_dice.c"	if (numLeds > 3){
000171   1803     btfsc   0x03, 0x0        	BTFSC	STATUS,0
000172   14b3     bsf     0x33, 0x1        	BSF	r0x1008,1
000173   3004     movlw   0x04             	MOVLW	0x04
                                           ;	.line	47; "six_sided_dice.c"	temp |= (0b10000);
000174   0232     subwf   0x32, 0x0        	SUBWF	r0x1007,W
                                           ;	.line	49; "six_sided_dice.c"	if (numLeds == 6){
000175   1803     btfsc   0x03, 0x0        	BTFSC	STATUS,0
000176   1633     bsf     0x33, 0x4        	BSF	r0x1008,4
000177   0832     movf    0x32, 0x0        	MOVF	r0x1007,W
000178   3a06     xorlw   0x06             	XORLW	0x06
000179   1d03     btfss   0x03, 0x2        	BTFSS	STATUS,2
00017a   297d     goto    0x017d           	GOTO	_00153_DS_
                                           ;	.line	50; "six_sided_dice.c"	temp |= (0b00101);
00017b   3005     movlw   0x05             	MOVLW	0x05
00017c   04b3     iorwf   0x33, 0x1        	IORWF	r0x1008,F
                                           _00153_DS_:
                                           ;	.line	53; "six_sided_dice.c"	GPIO = temp;
00017d   1683     bsf     0x03, 0x5        	BANKSEL	r0x1008
00017e   0833     movf    0x33, 0x0        	MOVF	r0x1008,W
00017f   1283     bcf     0x03, 0x5        	BANKSEL	_GPIO
000180   0085     movwf   0x05             	MOVWF	_GPIO
                                           ;	.line	55; "six_sided_dice.c"	delay(TIME);
000181   3064     movlw   0x64             	MOVLW	0x64
000182   00ff     movwf   0x7f             	MOVWF	STK00
000183   3000     movlw   0x00             	MOVLW	0x00
                                           	PAGESEL	_delay
000184   21bf     call    0x01bf           	CALL	_delay
                                           	PAGESEL	$
                                           _00154_DS_:
                                           ;	.line	57; "six_sided_dice.c"	while (GP5);
000185   1283     bcf     0x03, 0x5        	BANKSEL	_GPIObits
000186   1a85     btfsc   0x05, 0x5        	BTFSC	_GPIObits,5
000187   2985     goto    0x0185           	GOTO	_00154_DS_
                                           ;	.line	60; "six_sided_dice.c"	GPIO = 0x00;
000188   0185     clrf    0x05             	CLRF	_GPIO
000189   2951     goto    0x0151           	GOTO	_00160_DS_
                                           ;	.line	63; "six_sided_dice.c"	}
00018a   0008     return                   	RETURN	
                                           ; exit point of _main
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;has an exit
                                           ;4 compiler assigned registers:
                                           ;   r0x1001
                                           ;   r0x1002
                                           ;   r0x1003
                                           ;   r0x1004
                                           ;; Starting pCode block
                                           S_six_sided_dice__lfsrGenerate	code
                                           _lfsrGenerate:
                                           ; 2 exit points
                                           ;	.line	17; "six_sided_dice.c"	if (lfsr & 0x01) {
0001e5   1683     bsf     0x03, 0x5        	BANKSEL	_lfsr
0001e6   083c     movf    0x3c, 0x0        	MOVF	_lfsr,W
0001e7   1683     bsf     0x03, 0x5        	BANKSEL	r0x1001
0001e8   00ad     movwf   0x2d             	MOVWF	r0x1001
0001e9   1c2d     btfss   0x2d, 0x0        	BTFSS	r0x1001,0
0001ea   29f9     goto    0x01f9           	GOTO	_00140_DS_
                                           ;;shiftRight_Left2ResultLit:5474: shCount=1, size=1, sign=0, same=0, offr=0
                                           ;	.line	18; "six_sided_dice.c"	lfsr = (lfsr >> 1) ^ LFSR_XOR;  // XOR feedback polynomial
0001eb   1003     bcf     0x03, 0x0        	BCF	STATUS,0
0001ec   1683     bsf     0x03, 0x5        	BANKSEL	_lfsr
0001ed   0c3c     rrf     0x3c, 0x0        	RRF	_lfsr,W
0001ee   1683     bsf     0x03, 0x5        	BANKSEL	r0x1001
0001ef   00ad     movwf   0x2d             	MOVWF	r0x1001
0001f0   00ac     movwf   0x2c             	MOVWF	r0x1002
                                           ;;1	CLRF	r0x1003
0001f1   30b8     movlw   0xb8             	MOVLW	0xb8
0001f2   062c     xorwf   0x2c, 0x0        	XORWF	r0x1002,W
0001f3   1683     bsf     0x03, 0x5        	BANKSEL	_lfsr
0001f4   00bc     movwf   0x3c             	MOVWF	_lfsr
0001f5   1683     bsf     0x03, 0x5        	BANKSEL	r0x1001
0001f6   00ad     movwf   0x2d             	MOVWF	r0x1001
0001f7   3000     movlw   0x00             	MOVLW	0x00
                                           ;;1	MOVWF	r0x1004
                                           ;;99	MOVF	r0x1001,W
0001f8   29fc     goto    0x01fc           	GOTO	_00141_DS_
                                           ;;shiftRight_Left2ResultLit:5474: shCount=1, size=1, sign=0, same=1, offr=0
                                           _00140_DS_:
                                           ;	.line	20; "six_sided_dice.c"	lfsr >>= 1;
0001f9   1003     bcf     0x03, 0x0        	BCF	STATUS,0
0001fa   1683     bsf     0x03, 0x5        	BANKSEL	_lfsr
0001fb   0cbc     rrf     0x3c, 0x1        	RRF	_lfsr,F
                                           _00141_DS_:
                                           ;	.line	22; "six_sided_dice.c"	return lfsr;
0001fc   1683     bsf     0x03, 0x5        	BANKSEL	_lfsr
0001fd   083c     movf    0x3c, 0x0        	MOVF	_lfsr,W
                                           ;	.line	23; "six_sided_dice.c"	}
0001fe   0008     return                   	RETURN	
                                           ; exit point of _lfsrGenerate
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;has an exit
                                           ;7 compiler assigned registers:
                                           ;   r0x1001
                                           ;   STK00
                                           ;   r0x1002
                                           ;   r0x1003
                                           ;   r0x1004
                                           ;   r0x1005
                                           ;   r0x1006
                                           ;; Starting pCode block
                                           S_six_sided_dice__delay	code
                                           _delay:
                                           ; 2 exit points
                                           ;	.line	11; "six_sided_dice.c"	void delay (unsigned int time){
0001bf   1683     bsf     0x03, 0x5        	BANKSEL	r0x1001
0001c0   00ad     movwf   0x2d             	MOVWF	r0x1001
0001c1   087f     movf    0x7f, 0x0        	MOVF	STK00,W
0001c2   00ac     movwf   0x2c             	MOVWF	r0x1002
                                           ;	.line	12; "six_sided_dice.c"	for(unsigned int i= 0; i < time; i++)
0001c3   01ae     clrf    0x2e             	CLRF	r0x1003
0001c4   01af     clrf    0x2f             	CLRF	r0x1004
                                           _00111_DS_:
0001c5   1683     bsf     0x03, 0x5        	BANKSEL	r0x1001
0001c6   082d     movf    0x2d, 0x0        	MOVF	r0x1001,W
0001c7   022f     subwf   0x2f, 0x0        	SUBWF	r0x1004,W
0001c8   1d03     btfss   0x03, 0x2        	BTFSS	STATUS,2
0001c9   29cc     goto    0x01cc           	GOTO	_00133_DS_
0001ca   082c     movf    0x2c, 0x0        	MOVF	r0x1002,W
0001cb   022e     subwf   0x2e, 0x0        	SUBWF	r0x1003,W
                                           _00133_DS_:
0001cc   1803     btfsc   0x03, 0x0        	BTFSC	STATUS,0
0001cd   29e4     goto    0x01e4           	GOTO	_00113_DS_
                                           ;;genSkipc:3307: created from rifx:0x7fff495c46b0
                                           ;	.line	13; "six_sided_dice.c"	for(unsigned int j= 0; j < 1000; j++);
0001ce   1683     bsf     0x03, 0x5        	BANKSEL	r0x1005
0001cf   01b0     clrf    0x30             	CLRF	r0x1005
0001d0   01b1     clrf    0x31             	CLRF	r0x1006
                                           ;;unsigned compare: left < lit(0x3E8=1000), size=2
                                           _00108_DS_:
0001d1   3003     movlw   0x03             	MOVLW	0x03
0001d2   1683     bsf     0x03, 0x5        	BANKSEL	r0x1006
0001d3   0231     subwf   0x31, 0x0        	SUBWF	r0x1006,W
0001d4   1d03     btfss   0x03, 0x2        	BTFSS	STATUS,2
0001d5   29d8     goto    0x01d8           	GOTO	_00134_DS_
0001d6   30e8     movlw   0xe8             	MOVLW	0xe8
0001d7   0230     subwf   0x30, 0x0        	SUBWF	r0x1005,W
                                           _00134_DS_:
0001d8   1803     btfsc   0x03, 0x0        	BTFSC	STATUS,0
0001d9   29df     goto    0x01df           	GOTO	_00112_DS_
                                           ;;genSkipc:3307: created from rifx:0x7fff495c46b0
0001da   1683     bsf     0x03, 0x5        	BANKSEL	r0x1005
0001db   0ab0     incf    0x30, 0x1        	INCF	r0x1005,F
0001dc   1903     btfsc   0x03, 0x2        	BTFSC	STATUS,2
0001dd   0ab1     incf    0x31, 0x1        	INCF	r0x1006,F
0001de   29d1     goto    0x01d1           	GOTO	_00108_DS_
                                           _00112_DS_:
                                           ;	.line	12; "six_sided_dice.c"	for(unsigned int i= 0; i < time; i++)
0001df   1683     bsf     0x03, 0x5        	BANKSEL	r0x1003
0001e0   0aae     incf    0x2e, 0x1        	INCF	r0x1003,F
0001e1   1903     btfsc   0x03, 0x2        	BTFSC	STATUS,2
0001e2   0aaf     incf    0x2f, 0x1        	INCF	r0x1004,F
0001e3   29c5     goto    0x01c5           	GOTO	_00111_DS_
                                           _00113_DS_:
                                           ;	.line	14; "six_sided_dice.c"	}
0001e4   0008     return                   	RETURN	
                                           ; exit point of _delay
                                           
                                           
                                           ;	code size estimation:
                                           ;	  104+   29 =   133 instructions (  324 byte)
                                           
                                           	end
